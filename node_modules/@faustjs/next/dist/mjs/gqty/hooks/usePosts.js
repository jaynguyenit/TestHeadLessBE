import { useRouter } from 'next/router.js';
import defaults from 'lodash/defaults.js';
import { hasCategoryId, hasCategorySlug } from '../../utils/index.js';
export function create(useQuery) {
    return (args) => {
        const { query } = useRouter();
        const { posts } = useQuery();
        const params = defaults({}, args);
        if (hasCategoryId(query)) {
            params.where = Object.assign({ categoryId: Number(query.categoryId) }, params.where);
        }
        else if (hasCategorySlug(query)) {
            params.where = Object.assign({ categoryName: query.categorySlug }, params.where);
        }
        return posts(params);
    };
}
